(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var o=t.g.document;if(!e&&o&&(o.currentScript&&(e=o.currentScript.src),!e)){var n=o.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();const e=t.p+"player.png",o=function(){function t(){}return t.prototype.move=function(t){},t.prototype.update=function(){},t.prototype.draw=function(){this.canvas2D.ctx.drawImage(this.image,this.pos.x,this.pos.y,this.size.width,this.size.height)},t.prototype.createPattern=function(){this.pattern=this.canvas2D.ctx.createPattern(this.image,"repeat-x")},Object.defineProperty(t.prototype,"posX",{get:function(){return this.pos.x},set:function(t){this.pos.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"posY",{get:function(){return this.pos.y},set:function(t){this.pos.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.size.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.size.height},enumerable:!1,configurable:!0}),t}();var n,i=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});const r=function(t){function e(e){var o=t.call(this)||this;return o.canvas2D=e,o.image=new Image,o}return i(e,t),e.prototype.update=function(){},e.prototype.notify=function(t){},Object.defineProperty(e.prototype,"getVelocityX",{get:function(){return this.velocityX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"setVelocityX",{set:function(t){this.velocityX=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getVelocityY",{get:function(){return this.velocityY},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"setVelocityY",{set:function(t){this.velocityY=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getGravity",{get:function(){return this.gravity},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"setGravity",{set:function(t){this.gravity=t},enumerable:!1,configurable:!0}),e}(o);var s=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const a=function(t){function o(o){var n=t.call(this,o)||this;return n.gravity=1,n.friction=.9,n.speed=75,n.jumpStrength=25,n.size={width:80,height:80},n.groundLevel=n.canvas2D.height-n.size.height,n.image.src=e,n.start(),n}return s(o,t),o.prototype.update=function(){this.updatePosition(),this.isOnGround()&&this.stopFalling(),this.draw()},o.prototype.notify=function(t){console.log("notify")},o.prototype.start=function(){this.velocityX=0,this.velocityY=0,this.pos={x:0,y:this.groundLevel}},o.prototype.updatePosition=function(){this.isOnPlatform?this.velocityY=0:this.isColliding?this.velocityY=this.jumpStrength:this.velocityY+=this.gravity,this.pos.y+=this.velocityY,this.velocityX*=this.friction,this.pos.x+=this.velocityX},o.prototype.stopFalling=function(){this.velocityY=0,this.gravity=0,this.pos.y=this.groundLevel},o.prototype.jump=function(){this.velocityY=-this.jumpStrength,this.gravity=1},o.prototype.move=function(t){switch(t){case"left":this.velocityX>-this.speed&&this.velocityX--;break;case"right":this.velocityX<this.speed&&this.velocityX++}},o.prototype.isOnGround=function(){return this.pos.y>=this.groundLevel},Object.defineProperty(o.prototype,"getJumpStrength",{get:function(){return this.jumpStrength},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"setJumpStrength",{set:function(t){this.jumpStrength=t},enumerable:!1,configurable:!0}),o}(r),c=function(){function t(){var t=this;this.keysPressed=[],document.addEventListener("keydown",(function(e){return t.keyDown(e)})),document.addEventListener("keyup",(function(e){return t.keyUp(e)}))}return t.prototype.keyDown=function(t){this.keysPressed[t.key]=!0},t.prototype.keyUp=function(t){this.keysPressed[t.key]=!1},t.prototype.getKey=function(t){return this.keysPressed[t]},t}(),p=t.p+"background.png",h=t.p+"grass.png";var u=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const l=function(t){function e(e,o,n){var i=t.call(this)||this;return i.canvas2D=e,i.size={width:(400,600,Math.floor(200*Math.random())+400),height:80},i.pos={x:o,y:n},i.image=new Image,i.image.src=h,i.image.onload=i.createPattern.bind(i),i}return u(e,t),e.prototype.notify=function(){console.log("notified")},e.prototype.update=function(){this.draw()},e.prototype.draw=function(){this.canvas2D.ctx.save(),this.canvas2D.ctx.fillStyle=this.pattern,this.canvas2D.ctx.translate(this.pos.x,this.pos.y),this.canvas2D.ctx.fillRect(0,0,this.size.width,this.size.height),this.canvas2D.ctx.restore()},e}(o);var y=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const f=function(t){function e(e){var o=t.call(this)||this;return o.observers=[],o.platforms=[],o.canvas2D=e,o.pos={x:0,y:0},o.speed=10,o.size={width:5e3,height:o.canvas2D.height},o.image=new Image,o.image.src=p,o.image.onload=o.createPattern.bind(o),o.generatePlatforms(),o}return y(e,t),e.prototype.generatePlatforms=function(){var t=new l(this.canvas2D,400,400);this.platforms.push(t),this.attach(t)},e.prototype.move=function(t){switch(t){case"left":this.pos.x+=this.speed;break;case"right":this.pos.x-=this.speed}},e.prototype.attach=function(t){this.observers.push(t)},e.prototype.detach=function(t){},e.prototype.notify=function(){for(var t=0,e=this.observers;t<e.length;t++)e[t].notify(this)},e.prototype.update=function(){this.canvas2D.ctx.save(),this.draw(),this.platforms.forEach((function(t){t.update()})),this.canvas2D.ctx.restore()},e.prototype.draw=function(){this.canvas2D.ctx.fillStyle=this.pattern,this.canvas2D.ctx.translate(this.pos.x,this.pos.y),this.canvas2D.ctx.fillRect(0,0,this.size.width,this.size.height)},e}(o),d=function(){function t(){this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d"),this.boundries=this.canvas.getBoundingClientRect()}return t.prototype.clear=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.drawBackground=function(t){this.ctx.save(),this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.restore()},t.prototype.update=function(){this.clear(),this.drawBackground("#333")},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},enumerable:!1,configurable:!0}),t}(),g=function(){function t(t,e,o,n){this.collisionMargin=20,this.canvas2D=t,this.player=e,this.keyboard=o,this.level=n}return t.prototype.update=function(){this.collisionController(),this.keyboardController()},t.prototype.reachedLevelStart=function(){return this.level.posX>=0},t.prototype.reachedLevelEnd=function(){return this.level.posX-this.canvas2D.width<=-this.level.width},t.prototype.reachedScreenStart=function(){return this.player.posX<=200},t.prototype.reachedScreenEnd=function(){return this.player.posX+this.player.width>=this.canvas2D.width-200},t.prototype.keyboardController=function(){this.keyboard.getKey(" ")&&(this.player.isOnGround()||this.player.isOnPlatform)&&(this.player.isOnPlatform=!1,this.player.jump()),this.keyboard.getKey("ArrowLeft")&&(this.reachedScreenStart()||this.player.move("left"),this.reachedScreenStart()&&!this.reachedLevelStart()&&this.level.move("left")),this.keyboard.getKey("ArrowRight")&&(this.reachedScreenEnd()||this.player.move("right"),this.reachedScreenEnd()&&!this.reachedLevelEnd()&&this.level.move("right"))},t.prototype.isOnTop=function(t,e){return t.posY+t.height>=e.posY-this.collisionMargin&&t.posY+t.height<=e.posY+this.collisionMargin||t.posY+t.height===e.posY},t.prototype.detectCollision=function(t,e){return t.posX+t.width>=e.posX&&t.posX<=e.posX+e.width&&t.posY+t.height>=e.posY&&t.posY<=e.posY+e.height},t.prototype.collisionController=function(){var t=this;this.level.platforms.forEach((function(e){if(t.detectCollision(t.player,e)){if(t.player.isOnPlatform)return;t.isOnTop(t.player,e)?(t.player.posY=e.posY-t.player.height,t.player.isOnPlatform=!0):t.player.isColliding=!0}else t.player.isColliding=!1,t.player.isOnPlatform=!1}))},t}(),v=function(){function t(){this.characters=new Map,this.canvas2D=new d,this.player=new a(this.canvas2D),this.keyboard=new c,this.level=new f(this.canvas2D),this.characters.set("Player",this.player),this.engine=new g(this.canvas2D,this.player,this.keyboard,this.level),this.gameLoop()}return t.prototype.gameLoop=function(){this.canvas2D.update(),this.level.update(),this.engine.update(),this.updateCharacters(),requestAnimationFrame(this.gameLoop.bind(this))},t.prototype.updateCharacters=function(){this.characters.forEach((function(t){t.update()}))},t.startGame=function(){return t.instance||(t.instance=new t),t.instance},t}();window.addEventListener("load",(function(){v.startGame()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cy1nYW1lL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3RzLWdhbWUvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly90cy1nYW1lL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3RzLWdhbWUvLi9zcmMvaW1hZ2VzL3BsYXllci5wbmciLCJ3ZWJwYWNrOi8vdHMtZ2FtZS8uL3NyYy9nYW1lL1JlbmRlcmFibGUudHMiLCJ3ZWJwYWNrOi8vdHMtZ2FtZS8uL3NyYy9jaGFyYWN0ZXJzL0NoYXJhY3Rlci50cyIsIndlYnBhY2s6Ly90cy1nYW1lLy4vc3JjL2NoYXJhY3RlcnMvUGxheWVyLnRzIiwid2VicGFjazovL3RzLWdhbWUvLi9zcmMvY29uZmlnLnRzIiwid2VicGFjazovL3RzLWdhbWUvLi9zcmMvaW5wdXQvS2V5Ym9hcmQudHMiLCJ3ZWJwYWNrOi8vdHMtZ2FtZS8uL3NyYy9pbWFnZXMvYmFja2dyb3VuZC5wbmciLCJ3ZWJwYWNrOi8vdHMtZ2FtZS8uL3NyYy9pbWFnZXMvZ3Jhc3MucG5nIiwid2VicGFjazovL3RzLWdhbWUvLi9zcmMvbGV2ZWxzL1BsYXRmb3JtLnRzIiwid2VicGFjazovL3RzLWdhbWUvLi9zcmMvdXRpbHMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vdHMtZ2FtZS8uL3NyYy9sZXZlbHMvTGV2ZWwudHMiLCJ3ZWJwYWNrOi8vdHMtZ2FtZS8uL3NyYy9nYW1lL0NhbnZhczJELnRzIiwid2VicGFjazovL3RzLWdhbWUvLi9zcmMvZ2FtZS9FbmdpbmUudHMiLCJ3ZWJwYWNrOi8vdHMtZ2FtZS8uL3NyYy9nYW1lL0dhbWUudHMiLCJ3ZWJwYWNrOi8vdHMtZ2FtZS8uL3NyYy9tYWluLnRzIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJnIiwiZ2xvYmFsVGhpcyIsInRoaXMiLCJGdW5jdGlvbiIsImUiLCJ3aW5kb3ciLCJzY3JpcHRVcmwiLCJpbXBvcnRTY3JpcHRzIiwibG9jYXRpb24iLCJkb2N1bWVudCIsImN1cnJlbnRTY3JpcHQiLCJzcmMiLCJzY3JpcHRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJsZW5ndGgiLCJFcnJvciIsInJlcGxhY2UiLCJwIiwibW92ZSIsImRpcmVjdGlvbiIsInVwZGF0ZSIsImRyYXciLCJjYW52YXMyRCIsImN0eCIsImRyYXdJbWFnZSIsImltYWdlIiwicG9zIiwieCIsInkiLCJzaXplIiwid2lkdGgiLCJoZWlnaHQiLCJjcmVhdGVQYXR0ZXJuIiwicGF0dGVybiIsIkltYWdlIiwibm90aWZ5IiwiYW55IiwidmVsb2NpdHlYIiwidmVsb2NpdHlZIiwiZ3Jhdml0eSIsImZyaWN0aW9uIiwic3BlZWQiLCJqdW1wU3RyZW5ndGgiLCJncm91bmRMZXZlbCIsInN0YXJ0IiwidXBkYXRlUG9zaXRpb24iLCJpc09uR3JvdW5kIiwic3RvcEZhbGxpbmciLCJsZXZlbCIsImNvbnNvbGUiLCJsb2ciLCJpc09uUGxhdGZvcm0iLCJpc0NvbGxpZGluZyIsImp1bXAiLCJrZXlzUHJlc3NlZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJrZXlEb3duIiwia2V5VXAiLCJrZXkiLCJnZXRLZXkiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJvbmxvYWQiLCJiaW5kIiwic2F2ZSIsImZpbGxTdHlsZSIsInRyYW5zbGF0ZSIsImZpbGxSZWN0IiwicmVzdG9yZSIsIm9ic2VydmVycyIsInBsYXRmb3JtcyIsImdlbmVyYXRlUGxhdGZvcm1zIiwicGxhdGZvcm0iLCJwdXNoIiwiYXR0YWNoIiwib2JzZXJ2ZXIiLCJkZXRhY2giLCJmb3JFYWNoIiwiY2FudmFzIiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRDb250ZXh0IiwiYm91bmRyaWVzIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiY2xlYXIiLCJjbGVhclJlY3QiLCJkcmF3QmFja2dyb3VuZCIsImJhY2tncm91bmRDb2xvciIsInBsYXllciIsImtleWJvYXJkIiwiY29sbGlzaW9uTWFyZ2luIiwiY29sbGlzaW9uQ29udHJvbGxlciIsImtleWJvYXJkQ29udHJvbGxlciIsInJlYWNoZWRMZXZlbFN0YXJ0IiwicG9zWCIsInJlYWNoZWRMZXZlbEVuZCIsInJlYWNoZWRTY3JlZW5TdGFydCIsInJlYWNoZWRTY3JlZW5FbmQiLCJpc09uVG9wIiwiYSIsImIiLCJwb3NZIiwiZGV0ZWN0Q29sbGlzaW9uIiwiY2hhcmFjdGVycyIsIk1hcCIsInNldCIsImVuZ2luZSIsImdhbWVMb29wIiwidXBkYXRlQ2hhcmFjdGVycyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImNoYXJhY3RlciIsInN0YXJ0R2FtZSIsIkdhbWUiLCJpbnN0YW5jZSJdLCJtYXBwaW5ncyI6Im1CQUNBLElBQUlBLEVBQXNCLEdDRDFCQSxFQUFvQkMsRUFBSSxXQUN2QixHQUEwQixpQkFBZkMsV0FBeUIsT0FBT0EsV0FDM0MsSUFDQyxPQUFPQyxNQUFRLElBQUlDLFNBQVMsY0FBYixHQUNkLE1BQU9DLEdBQ1IsR0FBc0IsaUJBQVhDLE9BQXFCLE9BQU9BLFFBTGpCLEcsTUNBeEIsSUFBSUMsRUFDQVAsRUFBb0JDLEVBQUVPLGdCQUFlRCxFQUFZUCxFQUFvQkMsRUFBRVEsU0FBVyxJQUN0RixJQUFJQyxFQUFXVixFQUFvQkMsRUFBRVMsU0FDckMsSUFBS0gsR0FBYUcsSUFDYkEsRUFBU0MsZ0JBQ1pKLEVBQVlHLEVBQVNDLGNBQWNDLE1BQy9CTCxHQUFXLENBQ2YsSUFBSU0sRUFBVUgsRUFBU0kscUJBQXFCLFVBQ3pDRCxFQUFRRSxTQUFRUixFQUFZTSxFQUFRQSxFQUFRRSxPQUFTLEdBQUdILEtBSzdELElBQUtMLEVBQVcsTUFBTSxJQUFJUyxNQUFNLHlEQUNoQ1QsRUFBWUEsRUFBVVUsUUFBUSxPQUFRLElBQUlBLFFBQVEsUUFBUyxJQUFJQSxRQUFRLFlBQWEsS0FDcEZqQixFQUFvQmtCLEVBQUlYLEcsR0NmeEIsUUFBZSxJQUEwQixhLEVDSXpDLHlCQXNEQSxPQTFDWSxZQUFBWSxLQUFWLFNBQWVDLEtBRUwsWUFBQUMsT0FBVixhQUVVLFlBQUFDLEtB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LEtBQUFvRCxXQUFxQyxJQUFJQyxJQUkvQ3RHLEtBQUtvQixTQUFXLElBQUksRUFDcEJwQixLQUFLc0YsT0FBUyxJQUFJLEVBQU90RixLQUFLb0IsVUFDOUJwQixLQUFLdUYsU0FBVyxJQUFJLEVBQ3BCdkYsS0FBSzhDLE1BQVEsSUFBSSxFQUFNOUMsS0FBS29CLFVBQzVCcEIsS0FBS3FHLFdBQVdFLElBQUksU0FBVXZHLEtBQUtzRixRQUNuQ3RGLEtBQUt3RyxPQUFTLElBQUksRUFDaEJ4RyxLQUFLb0IsU0FDTHBCLEtBQUtzRixPQUNMdEYsS0FBS3VGLFNBQ0x2RixLQUFLOEMsT0FFUDlDLEtBQUt5RyxXQXlCVCxPQXJCVSxZQUFBQSxTQUFSLFdBQ0V6RyxLQUFLb0IsU0FBU0YsU0FDZGxCLEtBQUs4QyxNQUFNNUIsU0FDWGxCLEtBQUt3RyxPQUFPdEYsU0FDWmxCLEtBQUswRyxtQkFDTEMsc0JBQXNCM0csS0FBS3lHLFNBQVMzQyxLQUFLOUQsUUFHbkMsWUFBQTBHLGlCQUFSLFdBQ0UxRyxLQUFLcUcsV0FBV3pCLFNBQVEsU0FBQ2dDLEdBQ3ZCQSxFQUFVMUYsYUFLQSxFQUFBMkYsVUFBZCxXQUlFLE9BSEtDLEVBQUtDLFdBQ1JELEVBQUtDLFNBQVcsSUFBSUQsR0FFZkEsRUFBS0MsVUFFaEIsRUFoREEsR0NMQTVHLE9BQU9rRCxpQkFBaUIsUUFBUSxXQUM5QixrQiIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJ2YXIgc2NyaXB0VXJsO1xuaWYgKF9fd2VicGFja19yZXF1aXJlX18uZy5pbXBvcnRTY3JpcHRzKSBzY3JpcHRVcmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcubG9jYXRpb24gKyBcIlwiO1xudmFyIGRvY3VtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmRvY3VtZW50O1xuaWYgKCFzY3JpcHRVcmwgJiYgZG9jdW1lbnQpIHtcblx0aWYgKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQpXG5cdFx0c2NyaXB0VXJsID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmNcblx0aWYgKCFzY3JpcHRVcmwpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGlmKHNjcmlwdHMubGVuZ3RoKSBzY3JpcHRVcmwgPSBzY3JpcHRzW3NjcmlwdHMubGVuZ3RoIC0gMV0uc3JjXG5cdH1cbn1cbi8vIFdoZW4gc3VwcG9ydGluZyBicm93c2VycyB3aGVyZSBhbiBhdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIHlvdSBtdXN0IHNwZWNpZnkgYW4gb3V0cHV0LnB1YmxpY1BhdGggbWFudWFsbHkgdmlhIGNvbmZpZ3VyYXRpb25cbi8vIG9yIHBhc3MgYW4gZW1wdHkgc3RyaW5nIChcIlwiKSBhbmQgc2V0IHRoZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB2YXJpYWJsZSBmcm9tIHlvdXIgY29kZSB0byB1c2UgeW91ciBvd24gbG9naWMuXG5pZiAoIXNjcmlwdFVybCkgdGhyb3cgbmV3IEVycm9yKFwiQXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIik7XG5zY3JpcHRVcmwgPSBzY3JpcHRVcmwucmVwbGFjZSgvIy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcPy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcL1teXFwvXSskLywgXCIvXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gc2NyaXB0VXJsOyIsImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJwbGF5ZXIucG5nXCI7IiwiaW1wb3J0IHsgU2l6ZSB9IGZyb20gXCIuLi90eXBlcy9TaXplXCI7XHJcbmltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuLi90eXBlcy9WZWN0b3JcIjtcclxuaW1wb3J0IENhbnZhczJEIGZyb20gXCIuL0NhbnZhczJEXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBSZW5kZXJhYmxlIHtcclxuICAvLyBhYnN0cmFjdCBtZXRob2RzIGhhdmUgdG8gYmUgaW1wbGVtZW50ZWRcclxuICAvLyBwcm90ZWN0ZWQgaXMgYXZhaWxhYmxlIG9uIGluc3RhbmNlcyBvbmx5XHJcbiAgcHJvdGVjdGVkIGNhbnZhczJEOiBDYW52YXMyRDtcclxuICBwcm90ZWN0ZWQgaW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQ7XHJcblxyXG4gIHByb3RlY3RlZCBwb3M6IFZlY3RvcjtcclxuICBwcm90ZWN0ZWQgc2l6ZTogU2l6ZTtcclxuICBwcm90ZWN0ZWQgc3BlZWQ6IG51bWJlcjtcclxuXHJcbiAgcHJvdGVjdGVkIHBhdHRlcm46IENhbnZhc1BhdHRlcm47XHJcblxyXG4gIHByb3RlY3RlZCBtb3ZlKGRpcmVjdGlvbjogc3RyaW5nKTogdm9pZCB7fVxyXG5cclxuICBwcm90ZWN0ZWQgdXBkYXRlKCk6IHZvaWQge31cclxuXHJcbiAgcHJvdGVjdGVkIGRyYXcoKTogdm9pZCB7XHJcbiAgICB0aGlzLmNhbnZhczJELmN0eC5kcmF3SW1hZ2UoXHJcbiAgICAgIHRoaXMuaW1hZ2UsXHJcbiAgICAgIHRoaXMucG9zLngsXHJcbiAgICAgIHRoaXMucG9zLnksXHJcbiAgICAgIHRoaXMuc2l6ZS53aWR0aCxcclxuICAgICAgdGhpcy5zaXplLmhlaWdodFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBjcmVhdGVQYXR0ZXJuKCk6IHZvaWQge1xyXG4gICAgdGhpcy5wYXR0ZXJuID0gdGhpcy5jYW52YXMyRC5jdHguY3JlYXRlUGF0dGVybih0aGlzLmltYWdlLCBcInJlcGVhdC14XCIpO1xyXG4gIH1cclxuXHJcbiAgLy8gR2V0dGVyIGFuZCBzZXR0ZXJzXHJcbiAgZ2V0IHBvc1goKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLnBvcy54O1xyXG4gIH1cclxuXHJcbiAgc2V0IHBvc1goeDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnBvcy54ID0geDtcclxuICB9XHJcblxyXG4gIGdldCBwb3NZKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5wb3MueTtcclxuICB9XHJcblxyXG4gIHNldCBwb3NZKHk6IG51bWJlcikge1xyXG4gICAgdGhpcy5wb3MueSA9IHk7XHJcbiAgfVxyXG5cclxuICBnZXQgd2lkdGgoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLnNpemUud2lkdGg7XHJcbiAgfVxyXG5cclxuICBnZXQgaGVpZ2h0KCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5zaXplLmhlaWdodDtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IENhbnZhczJEIGZyb20gXCIuLi9nYW1lL0NhbnZhczJEXCI7XHJcbmltcG9ydCBSZW5kZXJhYmxlIGZyb20gXCIuLi9nYW1lL1JlbmRlcmFibGVcIjtcclxuaW1wb3J0IHsgT2JzZXJ2ZXIgfSBmcm9tIFwiLi4vaW50ZXJmYWNlcy9PYnNlcnZlclwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2hhcmFjdGVyIGV4dGVuZHMgUmVuZGVyYWJsZSBpbXBsZW1lbnRzIE9ic2VydmVyIHtcclxuICAvL01lbWJlcnNcclxuICBwcm90ZWN0ZWQgY2FudmFzUG9zOiBET01SZWN0O1xyXG4gIHByb3RlY3RlZCBncmF2aXR5OiBudW1iZXI7XHJcbiAgcHJvdGVjdGVkIGZyaWN0aW9uOiBudW1iZXI7XHJcbiAgcHJvdGVjdGVkIHZlbG9jaXR5WDogbnVtYmVyO1xyXG4gIHByb3RlY3RlZCB2ZWxvY2l0eVk6IG51bWJlcjtcclxuXHJcbiAgLy8gQ29uc3RydWN0b3JcclxuICBwcm90ZWN0ZWQgY29uc3RydWN0b3IoY2FudmFzMkQ6IENhbnZhczJEKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgdGhpcy5jYW52YXMyRCA9IGNhbnZhczJEO1xyXG4gICAgdGhpcy5pbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG4gIH1cclxuXHJcbiAgLy8gUHVibGljIG1ldGhvZHNcclxuICBwdWJsaWMgdXBkYXRlKCk6IHZvaWQge31cclxuXHJcbiAgcHVibGljIG5vdGlmeShhbnk6IGFueSk6IHZvaWQge31cclxuXHJcbiAgLy8gR2V0dGVycyBhbmQgc2V0dGVyc1xyXG4gIGdldCBnZXRWZWxvY2l0eVgoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLnZlbG9jaXR5WDtcclxuICB9XHJcblxyXG4gIHNldCBzZXRWZWxvY2l0eVgoeDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnZlbG9jaXR5WCA9IHg7XHJcbiAgfVxyXG5cclxuICBnZXQgZ2V0VmVsb2NpdHlZKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy52ZWxvY2l0eVk7XHJcbiAgfVxyXG5cclxuICBzZXQgc2V0VmVsb2NpdHlZKHk6IG51bWJlcikge1xyXG4gICAgdGhpcy52ZWxvY2l0eVkgPSB5O1xyXG4gIH1cclxuXHJcbiAgZ2V0IGdldEdyYXZpdHkoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLmdyYXZpdHk7XHJcbiAgfVxyXG5cclxuICBzZXQgc2V0R3Jhdml0eShncmF2aXR5OiBudW1iZXIpIHtcclxuICAgIHRoaXMuZ3Jhdml0eSA9IGdyYXZpdHk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IEdBTUVfQ09ORklHIH0gZnJvbSBcIi4uL2NvbmZpZ1wiO1xyXG5pbXBvcnQgQ2FudmFzMkQgZnJvbSBcIi4uL2dhbWUvQ2FudmFzMkRcIjtcclxuaW1wb3J0IFBMQVlFUl9JTUFHRSBmcm9tIFwiLi4vaW1hZ2VzL3BsYXllci5wbmdcIjtcclxuaW1wb3J0IExldmVsIGZyb20gXCIuLi9sZXZlbHMvTGV2ZWxcIjtcclxuaW1wb3J0IENoYXJhY3RlciBmcm9tIFwiLi9DaGFyYWN0ZXJcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBsYXllciBleHRlbmRzIENoYXJhY3RlciB7XHJcbiAgLy8gTWVtYmVyc1xyXG4gIHByaXZhdGUganVtcFN0cmVuZ3RoOiBudW1iZXI7XHJcbiAgcHJpdmF0ZSBncm91bmRMZXZlbDogbnVtYmVyO1xyXG5cclxuICBwdWJsaWMgaXNDb2xsaWRpbmc6IGJvb2xlYW47XHJcbiAgcHVibGljIGlzT25QbGF0Zm9ybTogYm9vbGVhbjtcclxuXHJcbiAgLy8gQ29uc3RydWN0b3JcclxuICBjb25zdHJ1Y3RvcihjYW52YXMyRDogQ2FudmFzMkQpIHtcclxuICAgIHN1cGVyKGNhbnZhczJEKTtcclxuXHJcbiAgICB0aGlzLmdyYXZpdHkgPSBHQU1FX0NPTkZJRy5HUkFWSVRZO1xyXG4gICAgdGhpcy5mcmljdGlvbiA9IEdBTUVfQ09ORklHLkZSSUNUSU9OO1xyXG4gICAgdGhpcy5zcGVlZCA9IEdBTUVfQ09ORklHLlBMQVlFUl9TUEVFRDtcclxuICAgIHRoaXMuanVtcFN0cmVuZ3RoID0gR0FNRV9DT05GSUcuUExBWUVSX0pVTVBfU1RSRU5HVEg7XHJcbiAgICB0aGlzLnNpemUgPSB7XHJcbiAgICAgIHdpZHRoOiBHQU1FX0NPTkZJRy5QTEFZRVJfU0laRSxcclxuICAgICAgaGVpZ2h0OiBHQU1FX0NPTkZJRy5QTEFZRVJfU0laRSxcclxuICAgIH07XHJcbiAgICB0aGlzLmdyb3VuZExldmVsID0gdGhpcy5jYW52YXMyRC5oZWlnaHQgLSB0aGlzLnNpemUuaGVpZ2h0O1xyXG4gICAgdGhpcy5pbWFnZS5zcmMgPSBQTEFZRVJfSU1BR0U7XHJcblxyXG4gICAgdGhpcy5zdGFydCgpO1xyXG4gIH1cclxuXHJcbiAgLy8gUHVibGljIG1ldGhvZHNcclxuICBwdWJsaWMgdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgdGhpcy51cGRhdGVQb3NpdGlvbigpO1xyXG4gICAgaWYgKHRoaXMuaXNPbkdyb3VuZCgpKSB0aGlzLnN0b3BGYWxsaW5nKCk7XHJcbiAgICB0aGlzLmRyYXcoKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBub3RpZnkobGV2ZWw6IExldmVsKTogdm9pZCB7XHJcbiAgICBjb25zb2xlLmxvZyhcIm5vdGlmeVwiKTtcclxuICB9XHJcblxyXG4gIC8vIFByaXZhdGUgbWV0aG9kc1xyXG4gIHByaXZhdGUgc3RhcnQoKTogdm9pZCB7XHJcbiAgICB0aGlzLnZlbG9jaXR5WCA9IDA7XHJcbiAgICB0aGlzLnZlbG9jaXR5WSA9IDA7XHJcbiAgICB0aGlzLnBvcyA9IHsgeDogMCwgeTogdGhpcy5ncm91bmRMZXZlbCB9O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB1cGRhdGVQb3NpdGlvbigpOiB2b2lkIHtcclxuICAgIC8vIEhhbmRsZSB5IHBvc2l0aW9uXHJcbiAgICBpZiAodGhpcy5pc09uUGxhdGZvcm0pIHtcclxuICAgICAgdGhpcy52ZWxvY2l0eVkgPSAwOyAvLyBzdGF5IG9uIHBsYXRmb3JtXHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNDb2xsaWRpbmcpIHtcclxuICAgICAgdGhpcy52ZWxvY2l0eVkgPSB0aGlzLmp1bXBTdHJlbmd0aDsgLy8gbW92ZSBkb3duIGZyb20gcGxhdGZvcm1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMudmVsb2NpdHlZICs9IHRoaXMuZ3Jhdml0eTsgLy8gcmVndWxhciBncmF2aXR5XHJcbiAgICB9XHJcbiAgICB0aGlzLnBvcy55ICs9IHRoaXMudmVsb2NpdHlZO1xyXG5cclxuICAgIC8vIEhhbmRsZSB4IHBvc2l0aW9uXHJcbiAgICB0aGlzLnZlbG9jaXR5WCAqPSB0aGlzLmZyaWN0aW9uO1xyXG4gICAgdGhpcy5wb3MueCArPSB0aGlzLnZlbG9jaXR5WDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3RvcEZhbGxpbmcoKTogdm9pZCB7XHJcbiAgICB0aGlzLnZlbG9jaXR5WSA9IDA7XHJcbiAgICB0aGlzLmdyYXZpdHkgPSAwO1xyXG4gICAgdGhpcy5wb3MueSA9IHRoaXMuZ3JvdW5kTGV2ZWw7XHJcbiAgfVxyXG5cclxuICAvLyBQdWJsaWMgbWV0aG9kc1xyXG4gIHB1YmxpYyBqdW1wKCk6IHZvaWQge1xyXG4gICAgdGhpcy52ZWxvY2l0eVkgPSAtdGhpcy5qdW1wU3RyZW5ndGg7XHJcbiAgICB0aGlzLmdyYXZpdHkgPSAxO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG1vdmUoZGlyZWN0aW9uOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7XHJcbiAgICAgIGNhc2UgXCJsZWZ0XCI6XHJcbiAgICAgICAgaWYgKHRoaXMudmVsb2NpdHlYID4gLXRoaXMuc3BlZWQpIHRoaXMudmVsb2NpdHlYLS07XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJyaWdodFwiOlxyXG4gICAgICAgIGlmICh0aGlzLnZlbG9jaXR5WCA8IHRoaXMuc3BlZWQpIHRoaXMudmVsb2NpdHlYKys7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgaXNPbkdyb3VuZCgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLnBvcy55ID49IHRoaXMuZ3JvdW5kTGV2ZWw7XHJcbiAgfVxyXG5cclxuICAvLyBHZXR0ZXJzIGFuZCBzZXR0ZXJzXHJcbiAgZ2V0IGdldEp1bXBTdHJlbmd0aCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuanVtcFN0cmVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgc2V0IHNldEp1bXBTdHJlbmd0aChqdW1wU3RyZW5ndGg6IG51bWJlcikge1xyXG4gICAgdGhpcy5qdW1wU3RyZW5ndGggPSBqdW1wU3RyZW5ndGg7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjb25zdCBHQU1FX0NPTkZJRzogYW55ID0ge1xyXG4gIFNDUkVFTl9NQVJHSU46IDIwMCxcclxuICBCQUNLR1JPVU5EX0NPTE9SOiBcIiMzMzNcIixcclxuICBMRVZFTF9XSURUSDogNTAwMCxcclxuICBQTEFZRVJfU0laRTogODAsXHJcbiAgUExBWUVSX1NQRUVEOiA3NSxcclxuICBQTEFZRVJfSlVNUF9TVFJFTkdUSDogMjUsXHJcbiAgUExBVEZPUk1fSEVJR0hUOiA4MCxcclxuICBHUkFWSVRZOiAxLFxyXG4gIEZSSUNUSU9OOiAwLjksXHJcbn07XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEtleWJvYXJkIHtcclxuICAvLyBNZW1iZXJzXHJcbiAgcHJpdmF0ZSBrZXlzUHJlc3NlZDogYm9vbGVhbltdID0gW107XHJcblxyXG4gIC8vIENvbnN0cnVjdG9yXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4gdGhpcy5rZXlEb3duKGUpKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCAoZSkgPT4gdGhpcy5rZXlVcChlKSk7XHJcbiAgfVxyXG5cclxuICAvLyBQcml2YXRlIG1ldGhvZHNcclxuICBwcml2YXRlIGtleURvd24oZTogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xyXG4gICAgdGhpcy5rZXlzUHJlc3NlZFtlLmtleV0gPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBrZXlVcChlOiBLZXlib2FyZEV2ZW50KTogdm9pZCB7XHJcbiAgICB0aGlzLmtleXNQcmVzc2VkW2Uua2V5XSA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgLy8gUHVibGljIG1ldGhvZHNcclxuICBwdWJsaWMgZ2V0S2V5KGtleTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5rZXlzUHJlc3NlZFtrZXldO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiYmFja2dyb3VuZC5wbmdcIjsiLCJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiZ3Jhc3MucG5nXCI7IiwiaW1wb3J0IHsgR0FNRV9DT05GSUcgfSBmcm9tIFwiLi4vY29uZmlnXCI7XHJcbmltcG9ydCBDYW52YXMyRCBmcm9tIFwiLi4vZ2FtZS9DYW52YXMyRFwiO1xyXG5pbXBvcnQgUmVuZGVyYWJsZSBmcm9tIFwiLi4vZ2FtZS9SZW5kZXJhYmxlXCI7XHJcbmltcG9ydCBQTEFURk9STV9JTUFHRSBmcm9tIFwiLi4vaW1hZ2VzL2dyYXNzLnBuZ1wiO1xyXG5pbXBvcnQgeyByYW5kb21SYW5nZUludCB9IGZyb20gXCIuLi91dGlsc1wiO1xyXG5pbXBvcnQgeyBPYnNlcnZlciB9IGZyb20gXCIuLy4uL2ludGVyZmFjZXMvT2JzZXJ2ZXJcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBsYXRmb3JtIGV4dGVuZHMgUmVuZGVyYWJsZSBpbXBsZW1lbnRzIE9ic2VydmVyIHtcclxuICAvLyBDb25zdHJ1Y3RvclxyXG4gIGNvbnN0cnVjdG9yKGNhbnZhczJEOiBDYW52YXMyRCwgeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLmNhbnZhczJEID0gY2FudmFzMkQ7XHJcbiAgICB0aGlzLnNpemUgPSB7XHJcbiAgICAgIHdpZHRoOiByYW5kb21SYW5nZUludCg0MDAsIDYwMCksXHJcbiAgICAgIGhlaWdodDogR0FNRV9DT05GSUcuUExBVEZPUk1fSEVJR0hULFxyXG4gICAgfTtcclxuICAgIHRoaXMucG9zID0geyB4LCB5IH07XHJcbiAgICB0aGlzLmltYWdlID0gbmV3IEltYWdlKCk7XHJcbiAgICB0aGlzLmltYWdlLnNyYyA9IFBMQVRGT1JNX0lNQUdFO1xyXG4gICAgdGhpcy5pbWFnZS5vbmxvYWQgPSB0aGlzLmNyZWF0ZVBhdHRlcm4uYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIC8vIFB1YmxpYyBtZXRob2RzXHJcbiAgcHVibGljIG5vdGlmeSgpOiB2b2lkIHtcclxuICAgIGNvbnNvbGUubG9nKFwibm90aWZpZWRcIik7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgdGhpcy5kcmF3KCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZHJhdygpOiB2b2lkIHtcclxuICAgIHRoaXMuY2FudmFzMkQuY3R4LnNhdmUoKTtcclxuICAgIHRoaXMuY2FudmFzMkQuY3R4LmZpbGxTdHlsZSA9IHRoaXMucGF0dGVybjtcclxuICAgIHRoaXMuY2FudmFzMkQuY3R4LnRyYW5zbGF0ZSh0aGlzLnBvcy54LCB0aGlzLnBvcy55KTtcclxuICAgIHRoaXMuY2FudmFzMkQuY3R4LmZpbGxSZWN0KDAsIDAsIHRoaXMuc2l6ZS53aWR0aCwgdGhpcy5zaXplLmhlaWdodCk7XHJcbiAgICB0aGlzLmNhbnZhczJELmN0eC5yZXN0b3JlKCk7XHJcbiAgfVxyXG59XHJcbiIsIi8vIEdlbmVyYXRlIHJhbmRvbSBudW1iZXIgYmV0d2VlbiB4IGFuZCB5XHJcbmV4cG9ydCBmdW5jdGlvbiByYW5kb21SYW5nZUludChtaW46IG51bWJlciwgbWF4OiBudW1iZXIpIHtcclxuICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikpICsgbWluO1xyXG59XHJcbiIsImltcG9ydCB7IEdBTUVfQ09ORklHIH0gZnJvbSBcIi4uL2NvbmZpZ1wiO1xyXG5pbXBvcnQgQ2FudmFzMkQgZnJvbSBcIi4uL2dhbWUvQ2FudmFzMkRcIjtcclxuaW1wb3J0IFJlbmRlcmFibGUgZnJvbSBcIi4uL2dhbWUvUmVuZGVyYWJsZVwiO1xyXG5pbXBvcnQgQkdfSU1BR0UgZnJvbSBcIi4uL2ltYWdlcy9iYWNrZ3JvdW5kLnBuZ1wiO1xyXG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSBcIi4uL2ludGVyZmFjZXMvU3ViamVjdFwiO1xyXG5pbXBvcnQgeyBPYnNlcnZlciB9IGZyb20gXCIuLi9pbnRlcmZhY2VzL09ic2VydmVyXCI7XHJcbmltcG9ydCBQbGF0Zm9ybSBmcm9tIFwiLi9QbGF0Zm9ybVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGV2ZWwgZXh0ZW5kcyBSZW5kZXJhYmxlIGltcGxlbWVudHMgU3ViamVjdCB7XHJcbiAgLy8gTWVtYmVyc1xyXG4gIHB1YmxpYyBvYnNlcnZlcnM6IE9ic2VydmVyW10gPSBbXTtcclxuICBwdWJsaWMgcGxhdGZvcm1zOiBQbGF0Zm9ybVtdIHwgbnVsbCA9IFtdO1xyXG5cclxuICAvLyBDb25zdHJ1Y3RvclxyXG4gIGNvbnN0cnVjdG9yKGNhbnZhczJEOiBDYW52YXMyRCkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMuY2FudmFzMkQgPSBjYW52YXMyRDtcclxuICAgIHRoaXMucG9zID0geyB4OiAwLCB5OiAwIH07XHJcbiAgICB0aGlzLnNwZWVkID0gMTA7XHJcbiAgICB0aGlzLnNpemUgPSB7XHJcbiAgICAgIHdpZHRoOiBHQU1FX0NPTkZJRy5MRVZFTF9XSURUSCxcclxuICAgICAgaGVpZ2h0OiB0aGlzLmNhbnZhczJELmhlaWdodCxcclxuICAgIH07XHJcbiAgICB0aGlzLmltYWdlID0gbmV3IEltYWdlKCk7XHJcbiAgICB0aGlzLmltYWdlLnNyYyA9IEJHX0lNQUdFO1xyXG4gICAgdGhpcy5pbWFnZS5vbmxvYWQgPSB0aGlzLmNyZWF0ZVBhdHRlcm4uYmluZCh0aGlzKTtcclxuXHJcbiAgICB0aGlzLmdlbmVyYXRlUGxhdGZvcm1zKCk7XHJcbiAgfVxyXG5cclxuICAvLyBQcml2YXRlIG1ldGhvZHNcclxuICBnZW5lcmF0ZVBsYXRmb3JtcygpOiB2b2lkIHtcclxuICAgIGxldCBwbGF0Zm9ybSA9IG5ldyBQbGF0Zm9ybSh0aGlzLmNhbnZhczJELCA0MDAsIDQwMCk7XHJcbiAgICB0aGlzLnBsYXRmb3Jtcy5wdXNoKHBsYXRmb3JtKTtcclxuICAgIHRoaXMuYXR0YWNoKHBsYXRmb3JtKTtcclxuICB9XHJcblxyXG4gIC8vIFB1YmxpYyBtZXRob2RzXHJcbiAgcHVibGljIG1vdmUoZGlyZWN0aW9uOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7XHJcbiAgICAgIGNhc2UgXCJsZWZ0XCI6XHJcbiAgICAgICAgdGhpcy5wb3MueCArPSB0aGlzLnNwZWVkO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwicmlnaHRcIjpcclxuICAgICAgICB0aGlzLnBvcy54IC09IHRoaXMuc3BlZWQ7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYXR0YWNoKG9ic2VydmVyOiBPYnNlcnZlcik6IHZvaWQge1xyXG4gICAgdGhpcy5vYnNlcnZlcnMucHVzaChvYnNlcnZlcik7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZGV0YWNoKG9ic2VydmVyOiBPYnNlcnZlcik6IHZvaWQge31cclxuXHJcbiAgcHVibGljIG5vdGlmeSgpOiB2b2lkIHtcclxuICAgIGZvciAoY29uc3Qgb2JzZXJ2ZXIgb2YgdGhpcy5vYnNlcnZlcnMpIHtcclxuICAgICAgb2JzZXJ2ZXIubm90aWZ5KHRoaXMpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHVwZGF0ZSgpOiB2b2lkIHtcclxuICAgIHRoaXMuY2FudmFzMkQuY3R4LnNhdmUoKTtcclxuXHJcbiAgICB0aGlzLmRyYXcoKTtcclxuICAgIHRoaXMucGxhdGZvcm1zLmZvckVhY2goKHBsYXRmb3JtKSA9PiB7XHJcbiAgICAgIHBsYXRmb3JtLnVwZGF0ZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5jYW52YXMyRC5jdHgucmVzdG9yZSgpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGRyYXcoKTogdm9pZCB7XHJcbiAgICB0aGlzLmNhbnZhczJELmN0eC5maWxsU3R5bGUgPSB0aGlzLnBhdHRlcm47XHJcbiAgICB0aGlzLmNhbnZhczJELmN0eC50cmFuc2xhdGUodGhpcy5wb3MueCwgdGhpcy5wb3MueSk7XHJcbiAgICB0aGlzLmNhbnZhczJELmN0eC5maWxsUmVjdCgwLCAwLCB0aGlzLnNpemUud2lkdGgsIHRoaXMuc2l6ZS5oZWlnaHQpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBHQU1FX0NPTkZJRyB9IGZyb20gXCIuLi9jb25maWdcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhbnZhczJEIHtcclxuICAvLyBNZW1iZXJzXHJcbiAgcHJpdmF0ZSBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xyXG4gIHB1YmxpYyBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICBwdWJsaWMgYm91bmRyaWVzOiBET01SZWN0O1xyXG5cclxuICAvLyBDb25zdHJ1Y3RvclxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhc1wiKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgIHRoaXMuY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgdGhpcy5ib3VuZHJpZXMgPSB0aGlzLmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICB9XHJcblxyXG4gIC8vIFByaXZhdGUgbWV0aG9kc1xyXG4gIHByaXZhdGUgY2xlYXIoKSB7XHJcbiAgICB0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGRyYXdCYWNrZ3JvdW5kKGJhY2tncm91bmRDb2xvcjogc3RyaW5nKSB7XHJcbiAgICB0aGlzLmN0eC5zYXZlKCk7XHJcbiAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBiYWNrZ3JvdW5kQ29sb3I7XHJcbiAgICB0aGlzLmN0eC5maWxsUmVjdCgwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KTtcclxuICAgIHRoaXMuY3R4LnJlc3RvcmUoKTtcclxuICB9XHJcblxyXG4gIC8vIFB1YmxpYyBtZXRob2RzXHJcbiAgcHVibGljIHVwZGF0ZSgpIHtcclxuICAgIHRoaXMuY2xlYXIoKTtcclxuICAgIHRoaXMuZHJhd0JhY2tncm91bmQoR0FNRV9DT05GSUcuQkFDS0dST1VORF9DT0xPUik7XHJcbiAgfVxyXG5cclxuICAvLyBHZXR0ZXJzIGFuZCBzZXR0cnNcclxuICBnZXQgd2lkdGgoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jYW52YXMud2lkdGg7XHJcbiAgfVxyXG5cclxuICBnZXQgaGVpZ2h0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuY2FudmFzLmhlaWdodDtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBsYXllciBmcm9tIFwiLi4vY2hhcmFjdGVycy9QbGF5ZXJcIjtcclxuaW1wb3J0IHsgR0FNRV9DT05GSUcgfSBmcm9tIFwiLi4vY29uZmlnXCI7XHJcbmltcG9ydCBLZXlib2FyZCBmcm9tIFwiLi4vaW5wdXQvS2V5Ym9hcmRcIjtcclxuaW1wb3J0IExldmVsIGZyb20gXCIuLi9sZXZlbHMvTGV2ZWxcIjtcclxuaW1wb3J0IENhbnZhczJEIGZyb20gXCIuL0NhbnZhczJEXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFbmdpbmUge1xyXG4gIHByaXZhdGUgY2FudmFzMkQ6IENhbnZhczJEO1xyXG4gIHByaXZhdGUgcGxheWVyOiBQbGF5ZXI7XHJcbiAgcHJpdmF0ZSBrZXlib2FyZDogS2V5Ym9hcmQ7XHJcbiAgcHJpdmF0ZSBsZXZlbDogTGV2ZWw7XHJcbiAgcHJpdmF0ZSBjb2xsaXNpb25NYXJnaW46IG51bWJlciA9IDIwO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGNhbnZhczJEOiBDYW52YXMyRCxcclxuICAgIHBsYXllcjogUGxheWVyLFxyXG4gICAga2V5Ym9hcmQ6IEtleWJvYXJkLFxyXG4gICAgbGV2ZWw6IExldmVsXHJcbiAgKSB7XHJcbiAgICB0aGlzLmNhbnZhczJEID0gY2FudmFzMkQ7XHJcbiAgICB0aGlzLnBsYXllciA9IHBsYXllcjtcclxuICAgIHRoaXMua2V5Ym9hcmQgPSBrZXlib2FyZDtcclxuICAgIHRoaXMubGV2ZWwgPSBsZXZlbDtcclxuICB9XHJcblxyXG4gIHVwZGF0ZSgpOiB2b2lkIHtcclxuICAgIHRoaXMuY29sbGlzaW9uQ29udHJvbGxlcigpO1xyXG4gICAgdGhpcy5rZXlib2FyZENvbnRyb2xsZXIoKTtcclxuICB9XHJcblxyXG4gIC8vIFByaXZhdGUgbWV0aG9kc1xyXG4gIHByaXZhdGUgcmVhY2hlZExldmVsU3RhcnQoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5sZXZlbC5wb3NYID49IDA7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJlYWNoZWRMZXZlbEVuZCgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLmxldmVsLnBvc1ggLSB0aGlzLmNhbnZhczJELndpZHRoIDw9IC10aGlzLmxldmVsLndpZHRoO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZWFjaGVkU2NyZWVuU3RhcnQoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5wbGF5ZXIucG9zWCA8PSBHQU1FX0NPTkZJRy5TQ1JFRU5fTUFSR0lOO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZWFjaGVkU2NyZWVuRW5kKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgdGhpcy5wbGF5ZXIucG9zWCArIHRoaXMucGxheWVyLndpZHRoID49XHJcbiAgICAgIHRoaXMuY2FudmFzMkQud2lkdGggLSBHQU1FX0NPTkZJRy5TQ1JFRU5fTUFSR0lOXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBrZXlib2FyZENvbnRyb2xsZXIoKTogdm9pZCB7XHJcbiAgICBpZiAoXHJcbiAgICAgIHRoaXMua2V5Ym9hcmQuZ2V0S2V5KFwiIFwiKSAmJlxyXG4gICAgICAodGhpcy5wbGF5ZXIuaXNPbkdyb3VuZCgpIHx8IHRoaXMucGxheWVyLmlzT25QbGF0Zm9ybSlcclxuICAgICkge1xyXG4gICAgICB0aGlzLnBsYXllci5pc09uUGxhdGZvcm0gPSBmYWxzZTtcclxuICAgICAgdGhpcy5wbGF5ZXIuanVtcCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmtleWJvYXJkLmdldEtleShcIkFycm93TGVmdFwiKSkge1xyXG4gICAgICBpZiAoIXRoaXMucmVhY2hlZFNjcmVlblN0YXJ0KCkpIHtcclxuICAgICAgICB0aGlzLnBsYXllci5tb3ZlKFwibGVmdFwiKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMucmVhY2hlZFNjcmVlblN0YXJ0KCkgJiYgIXRoaXMucmVhY2hlZExldmVsU3RhcnQoKSkge1xyXG4gICAgICAgIHRoaXMubGV2ZWwubW92ZShcImxlZnRcIik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5rZXlib2FyZC5nZXRLZXkoXCJBcnJvd1JpZ2h0XCIpKSB7XHJcbiAgICAgIGlmICghdGhpcy5yZWFjaGVkU2NyZWVuRW5kKCkpIHtcclxuICAgICAgICB0aGlzLnBsYXllci5tb3ZlKFwicmlnaHRcIik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLnJlYWNoZWRTY3JlZW5FbmQoKSAmJiAhdGhpcy5yZWFjaGVkTGV2ZWxFbmQoKSkge1xyXG4gICAgICAgIHRoaXMubGV2ZWwubW92ZShcInJpZ2h0XCIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGlzT25Ub3AoYTogUGxheWVyLCBiOiBhbnkpOiBib29sZWFuIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIChhLnBvc1kgKyBhLmhlaWdodCA+PSBiLnBvc1kgLSB0aGlzLmNvbGxpc2lvbk1hcmdpbiAmJlxyXG4gICAgICAgIGEucG9zWSArIGEuaGVpZ2h0IDw9IGIucG9zWSArIHRoaXMuY29sbGlzaW9uTWFyZ2luKSB8fFxyXG4gICAgICBhLnBvc1kgKyBhLmhlaWdodCA9PT0gYi5wb3NZXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBkZXRlY3RDb2xsaXNpb24oYTogUGxheWVyLCBiOiBhbnkpOiBib29sZWFuIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIGEucG9zWCArIGEud2lkdGggPj0gYi5wb3NYICYmXHJcbiAgICAgIGEucG9zWCA8PSBiLnBvc1ggKyBiLndpZHRoICYmXHJcbiAgICAgIGEucG9zWSArIGEuaGVpZ2h0ID49IGIucG9zWSAmJlxyXG4gICAgICBhLnBvc1kgPD0gYi5wb3NZICsgYi5oZWlnaHRcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNvbGxpc2lvbkNvbnRyb2xsZXIoKTogdm9pZCB7XHJcbiAgICB0aGlzLmxldmVsLnBsYXRmb3Jtcy5mb3JFYWNoKChwbGF0Zm9ybSkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5kZXRlY3RDb2xsaXNpb24odGhpcy5wbGF5ZXIsIHBsYXRmb3JtKSkge1xyXG4gICAgICAgIGlmICh0aGlzLnBsYXllci5pc09uUGxhdGZvcm0pIHJldHVybjtcclxuICAgICAgICBpZiAodGhpcy5pc09uVG9wKHRoaXMucGxheWVyLCBwbGF0Zm9ybSkpIHtcclxuICAgICAgICAgIHRoaXMucGxheWVyLnBvc1kgPSBwbGF0Zm9ybS5wb3NZIC0gdGhpcy5wbGF5ZXIuaGVpZ2h0O1xyXG4gICAgICAgICAgdGhpcy5wbGF5ZXIuaXNPblBsYXRmb3JtID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5wbGF5ZXIuaXNDb2xsaWRpbmcgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnBsYXllci5pc0NvbGxpZGluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucGxheWVyLmlzT25QbGF0Zm9ybSA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IENoYXJhY3RlciBmcm9tIFwiLi4vY2hhcmFjdGVycy9DaGFyYWN0ZXJcIjtcclxuaW1wb3J0IFBsYXllciBmcm9tIFwiLi4vY2hhcmFjdGVycy9QbGF5ZXJcIjtcclxuaW1wb3J0IEtleWJvYXJkIGZyb20gXCIuLi9pbnB1dC9LZXlib2FyZFwiO1xyXG5pbXBvcnQgTGV2ZWwgZnJvbSBcIi4uL2xldmVscy9MZXZlbFwiO1xyXG5pbXBvcnQgQ2FudmFzMkQgZnJvbSBcIi4vQ2FudmFzMkRcIjtcclxuaW1wb3J0IEVuZ2luZSBmcm9tIFwiLi9FbmdpbmVcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWUge1xyXG4gIC8vIE1lbWJlcnNcclxuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogR2FtZTtcclxuICBwcml2YXRlIGNhbnZhczJEOiBDYW52YXMyRDtcclxuICBwcml2YXRlIHBsYXllcjogUGxheWVyO1xyXG4gIHByaXZhdGUga2V5Ym9hcmQ6IEtleWJvYXJkO1xyXG4gIHByaXZhdGUgbGV2ZWw6IExldmVsO1xyXG4gIHByaXZhdGUgZW5naW5lOiBFbmdpbmU7XHJcbiAgcHJpdmF0ZSBjaGFyYWN0ZXJzOiBNYXA8c3RyaW5nLCBDaGFyYWN0ZXI+ID0gbmV3IE1hcCgpO1xyXG5cclxuICAvLyBDb25zdHJ1Y3RvclxyXG4gIHByaXZhdGUgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmNhbnZhczJEID0gbmV3IENhbnZhczJEKCk7XHJcbiAgICB0aGlzLnBsYXllciA9IG5ldyBQbGF5ZXIodGhpcy5jYW52YXMyRCk7XHJcbiAgICB0aGlzLmtleWJvYXJkID0gbmV3IEtleWJvYXJkKCk7XHJcbiAgICB0aGlzLmxldmVsID0gbmV3IExldmVsKHRoaXMuY2FudmFzMkQpO1xyXG4gICAgdGhpcy5jaGFyYWN0ZXJzLnNldChcIlBsYXllclwiLCB0aGlzLnBsYXllcik7XHJcbiAgICB0aGlzLmVuZ2luZSA9IG5ldyBFbmdpbmUoXHJcbiAgICAgIHRoaXMuY2FudmFzMkQsXHJcbiAgICAgIHRoaXMucGxheWVyLFxyXG4gICAgICB0aGlzLmtleWJvYXJkLFxyXG4gICAgICB0aGlzLmxldmVsXHJcbiAgICApO1xyXG4gICAgdGhpcy5nYW1lTG9vcCgpO1xyXG4gIH1cclxuXHJcbiAgLy8gUHJpdmF0ZSBtZXRob2RzXHJcbiAgcHJpdmF0ZSBnYW1lTG9vcCgpOiB2b2lkIHtcclxuICAgIHRoaXMuY2FudmFzMkQudXBkYXRlKCk7XHJcbiAgICB0aGlzLmxldmVsLnVwZGF0ZSgpO1xyXG4gICAgdGhpcy5lbmdpbmUudXBkYXRlKCk7XHJcbiAgICB0aGlzLnVwZGF0ZUNoYXJhY3RlcnMoKTtcclxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmdhbWVMb29wLmJpbmQodGhpcykpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB1cGRhdGVDaGFyYWN0ZXJzKCk6IHZvaWQge1xyXG4gICAgdGhpcy5jaGFyYWN0ZXJzLmZvckVhY2goKGNoYXJhY3RlcikgPT4ge1xyXG4gICAgICBjaGFyYWN0ZXIudXBkYXRlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIFB1YmxpYyBtZXRob2RzXHJcbiAgcHVibGljIHN0YXRpYyBzdGFydEdhbWUoKSB7XHJcbiAgICBpZiAoIUdhbWUuaW5zdGFuY2UpIHtcclxuICAgICAgR2FtZS5pbnN0YW5jZSA9IG5ldyBHYW1lKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gR2FtZS5pbnN0YW5jZTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IEdhbWUgZnJvbSBcIi4vZ2FtZS9HYW1lXCI7XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4ge1xyXG4gIEdhbWUuc3RhcnRHYW1lKCk7XHJcbn0pO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9